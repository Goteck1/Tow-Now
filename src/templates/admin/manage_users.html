{% extends "admin/admin_base.html" %}

{% block admin_title %}Manage Users - TowNow Admin{% endblock %}

{% block admin_page_title %}User Management{% endblock %}

{% block admin_content %}
<section id="manage-users-section">
    <div class="card">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
            <h4><i data-lucide="users" class="icon"></i> All Registered Users ({{ users|length if users else 0 }})</h4>
            <a href="#" class="btn btn-sm btn-primary"><i data-lucide="user-plus" class="icon"></i> Add New User</a> <!-- Placeholder for future functionality -->
        </div>
        
        {% if users %}
            <table class="admin-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Full Name</th>
                        <th>Email</th>
                        <th>User Type</th>
                        <th>Admin?</th>
                        <th>Registered On</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                        <tr>
                            <td>{{ user.id }}</td>
                            <td>{{ user.fullname }}</td>
                            <td>{{ user.email }}</td>
                            <td>{{ user.user_type|capitalize }}</td>
                            <td><span class="badge {{ 'badge-success' if user.is_admin else 'badge-secondary' }}">{{ 'Yes' if user.is_admin else 'No' }}</span></td>
                            <td>{{ user.id }}</td> {# Placeholder for registration date if available #}
                            <td class="actions">
                                <a href="#" title="Edit User"><i data-lucide="edit-2"></i></a>
                                <a href="#" title="Delete User" onclick="return confirm("Are you sure you want to delete this user?");"><i data-lucide="trash-2"></i></a>
                                <!-- Add more actions like view details, etc. -->
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p>No users found.</p>
        {% endif %}
    </div>
</section>

<style>
.badge {
    display: inline-block;
    padding: .25em .4em;
    font-size: 75%;
    font-weight: 700;
    line-height: 1;
    text-align: center;
    white-space: nowrap;
    vertical-align: baseline;
    border-radius: .25rem;
}
.badge-success {
    color: #fff;
    background-color: #28a745;
}
.badge-secondary {
    color: #fff;
    background-color: #6c757d;
}
.admin-table .actions .icon {
    width: 16px;
    height: 16px;
}
</style>
{% endblock %}

